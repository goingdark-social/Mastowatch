# ----- Mastodon Instance Configuration -----
# The Mastodon instance URL you want to monitor
INSTANCE_BASE=https://your.instance

# Single Mastodon Application Credentials
# Create ONE application in Settings â†’ Development in your Mastodon instance
# Required scopes: read + write:reports + admin:read + admin:write
# You'll get three values: Client Key, Client Secret, and Access Token
MASTODON_ACCESS_TOKEN=REPLACE_WITH_YOUR_ACCESS_TOKEN
MASTODON_CLIENT_KEY=REPLACE_WITH_YOUR_CLIENT_KEY
MASTODON_CLIENT_SECRET=REPLACE_WITH_YOUR_CLIENT_SECRET

# ----- DB / Redis -----
DATABASE_URL=postgresql+psycopg://postgres:postgres@db:5432/mastowatch
REDIS_URL=redis://redis:6379/0
POSTGRES_DB=mastowatch
POSTGRES_USER=mastowatch
POSTGRES_PASSWORD=mastowatch

# ----- Runtime -----
# CRITICAL SAFETY SETTING: When true, all enforcement actions are logged but NOT executed
# Only set to false when you have:
#   1. Verified your rules are working correctly
#   2. Tested thoroughly with DRY_RUN=true
#   3. Obtained approval to take automated enforcement actions
DRY_RUN=true

MAX_PAGES_PER_POLL=3
MAX_STATUSES_TO_FETCH=100
BATCH_SIZE=20
HTTP_TIMEOUT=30
RULE_CACHE_TTL=60
USER_AGENT=MastoWatch/0.1.0 (+moderation-sidecar)
HTTP_TIMEOUT=30
POLICY_VERSION=v1
REPORT_CATEGORY_DEFAULT=spam         # spam | violation | legal | other
FORWARD_REMOTE_REPORTS=false

# Emergency stop - halts all account processing when true
PANIC_STOP=false

# ----- API / Webhooks / CORS -----
API_KEY=REPLACE_ME
WEBHOOK_SECRET=REPLACE_ME
WEBHOOK_SIG_HEADER=X-Hub-Signature
CORS_ORIGINS=["http://localhost:5173"]

# ----- OAuth Admin Login -----
# Uses the same Mastodon app credentials (MASTODON_CLIENT_KEY/SECRET) from above
# Note: OAUTH_CLIENT_ID/SECRET are auto-aliased to MASTODON_CLIENT_KEY/SECRET
OAUTH_REDIRECT_URI=https://your-domain.com/admin/callback
OAUTH_SCOPE=read write follow
SESSION_SECRET_KEY=REPLACE_WITH_RANDOM_SECRET_KEY
SESSION_COOKIE_NAME=mastowatch_session
SESSION_COOKIE_MAX_AGE=86400

# ----- Frontend -----
UI_ORIGIN=http://localhost:5173
VITE_API_URL=http://localhost:8080

# ----- Version & Scheduling -----
VERSION=0.1.0
MIN_MASTODON_VERSION=4.0.0
POLL_ADMIN_ACCOUNTS_INTERVAL=30
POLL_ADMIN_ACCOUNTS_LOCAL_INTERVAL=30
QUEUE_STATS_INTERVAL=15

